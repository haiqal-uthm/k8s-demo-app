spring.application.name=apm-demo
management.endpoints.web.exposure.include=health,info,prometheus
management.endpoint.prometheus.enabled=true
management.server.port=8080

# Tomcat Session Configuration
server.servlet.session.timeout=30m
server.servlet.session.cookie.max-age=1800
server.servlet.session.cookie.name=APMSESSIONID
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=false
server.servlet.session.cookie.same-site=lax
server.servlet.session.tracking-modes=cookie
server.servlet.session.persistent=true

# Session store configuration (for clustering - optional)
spring.session.store-type=none
# For Redis session store (uncomment if using Redis):
# spring.session.store-type=redis
# spring.redis.host=localhost
# spring.redis.port=6379

# Tomcat specific configurations
server.tomcat.max-sessions=10000
server.tomcat.session-timeout=30
server.tomcat.use-relative-redirects=true

# Enable Redis-backed session store
spring.session.store-type=redis

# Redis connection (service name in your cluster)
spring.redis.host=redis
spring.redis.port=6379

# Optional tuning
spring.session.timeout=30m
spring.session.redis.namespace=apm-demo-sessions
spring.session.redis.flush-mode=on-save
spring.session.redis.cleanup-cron=0 * * * * *
